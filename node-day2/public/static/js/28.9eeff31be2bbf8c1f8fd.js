webpackJsonp([28],{"3g//":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("S6Tm"),a=s("rrxO");function r(e){var t=e.$route.params.id;Object(a.h)(t).then(function(t){e.name=t.data.publisher_name,e.phone=t.data.publisher_phone,e.serviceId=t.data.service_type.id,e.serviceName=t.data.service_type.title,1===parseInt(e.serviceId)?(e.dueTime=e.getDateYearMonthDay(t.data.due_time),e.serviceDaysListId=t.data.service_date.category,e.babyraisingBabyNumListId=t.data.baby_num.category):2===parseInt(e.serviceId)?e.serviceModeListId=t.data.live_home.category:4===parseInt(e.serviceId)?(e.serviceModeListId=t.data.live_home.category,e.hulistatusListId=t.data.nursin_status.category):3===parseInt(e.serviceId)&&(e.babyNumListId=t.data.baby_num.category,e.babyAgeListId=t.data.baby_age.category,e.serviceModeListId=t.data.live_home.category),e.serviceSalaryListId=t.data.service_salary.id,e.expListId=t.data.experience_id.category,e.ageListId=t.data.service_age.category,e.natureListSelect=t.data.nature.map(function(e){return e.id});var s,i;if(s=t.data.region,e.nativeListSelect=s?0===s.length?["-1"]:t.data.region.map(function(e){return e.code}):[],e.skillListSelect=t.data.service_babel.map(function(e){return e.id}),e.remark=t.data.remark,t.data.addr){var r="";t.data.addr.addr&&t.data.addr.addr&&(r+=t.data.addr.addr),e.address=r}else e.address="";i=e,Object(a.b)().then(function(e){i.serviceList=e.data.service_type_list,i.babyraisingBabyNumList=e.data.babyraising_baby_num_list,i.babyNumList=e.data.baby_num_list,i.babyAgeList=e.data.baby_age_list,i.ageList=e.data.age_list,i.expList=e.data.exp_list,i.hulistatusList=e.data.hulistatus_list,i.serviceModeList=e.data.service_mode_list,i.serviceSalaryListAll=e.data.service_salary_list,i.serviceDaysList=e.data.service_days_list}),Object(a.f)().then(function(e){i.nativeList=[{id:"-1",code:"-1",name:"不限"}],i.nativeList=i.nativeList.concat(e.data)}),Object(a.d)().then(function(e){i.natureList=e.data}),function(e,t){var s="?service_type_id="+t+"&category=skills-label";Object(a.g)(s).then(function(t){e.skillList=t.data.items})}(e,e.serviceId)})}var l={mounted:function(){r(this)},data:function(){return{name:"",phone:"",address:"",remark:"",dueTime:"",serviceId:"",serviceName:"",serviceList:[],dueDate:"",babyNumListId:"",babyNumList:[],babyraisingBabyNumList:[],babyraisingBabyNumListId:"",babyAgeList:[],babyAgeListId:"",ageList:[],ageListId:"",expList:[],expListId:"",hulistatusList:[],hulistatusListId:"",serviceModeList:[],serviceModeListId:"",serviceSalaryListAll:[],serviceSalaryListId:"",serviceDaysList:[],serviceDaysListId:"",nativeListSelect:[],nativeList:[],natureListSelect:[],natureList:[],skillListSelect:[],skillList:[]}},computed:{serviceSalaryList:function(){var e=this;return this.serviceSalaryListAll.filter(function(t){return t.service_type_id===parseInt(e.serviceId)}).sort(function(e,t){return e.salary-t.salary})}},methods:{shelvesDemand:function(){var e=this,t="?id="+this.$route.params.id;Object(a.e)(t).then(function(t){e.$router.push("/demandRecords")})},typeof:function(e){return Object.prototype.toString.call(e)},timeStrSafari:function(e){return e.replace(/-/g,"/")},getDate:function(e){var t="[object Date]"===this.typeof(e)?e:this.timeStrSafari(e),s=new Date(t),i=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,a=s.getDate()<10?"0"+s.getDate():s.getDate(),r=s.getHours()<10?"0"+s.getHours():s.getHours(),l=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes(),n=s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds();return s.getFullYear()+"-"+i+"-"+a+" "+r+":"+l+":"+n},getDateYearMonthDay:function(e){var t="[object Date]"===this.typeof(e)?e:this.timeStrSafari(e),s=new Date(t),i=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,a=s.getDate()<10?"0"+s.getDate():s.getDate();return s.getFullYear()+"-"+i+"-"+a},nativeAction:function(e,t){if("-1"===t.code){var s=t.code;-1!==this.nativeListSelect.indexOf("-1")?this.nativeListSelect=[]:(this.nativeListSelect=[],this.nativeListSelect.push(s))}else{var i=t.code,a=this.nativeListSelect.indexOf(i);-1===this.nativeListSelect.indexOf(i)?-1!==this.nativeListSelect.indexOf("-1")?(this.nativeListSelect=[],this.nativeListSelect.push(i)):(this.nativeListSelect.push(i),this.nativeListSelect.length===this.nativeList.length-1&&(this.nativeListSelect=["-1"])):this.nativeListSelect.splice(a,1)}},skillAction:function(e,t){var s=t.id,i=this.skillListSelect.indexOf(s);if(-1===this.skillListSelect.indexOf(s)){if(8===this.skillListSelect.length)return void this.$message.error("技能标签最多为8个");this.skillListSelect.push(s)}else this.skillListSelect.splice(i,1)},natureAction:function(e,t){var s=t.id,i=this.natureListSelect.indexOf(s);if(-1===this.natureListSelect.indexOf(s)){if(6===this.natureListSelect.length)return void this.$message.error("性格标签最多为6个");this.natureListSelect.push(s)}else this.natureListSelect.splice(i,1)},editAction:function(){if(1===parseInt(this.serviceId)){if(null===this.dueTime||""===this.dueTime)return void this.$message.error("请选择预产期");if(""===this.serviceDaysListId||null===this.serviceDaysListId)return void this.$message.error("请选择服务期限");if(""===this.babyraisingBabyNumListId||null===this.babyraisingBabyNumListId)return void this.$message.error("请选择宝贝数量")}else if(2===parseInt(this.serviceId)){if(""===this.serviceModeListId||null===this.serviceModeListId)return void this.$message.error("请选择服务方式")}else if(4===parseInt(this.serviceId)){if(""===this.serviceModeListId||null===this.serviceModeListId)return void this.$message.error("请选择服务方式");if(""===this.hulistatusListId||null===this.hulistatusListId)return void this.$message.error("请选择服务对象")}else if(3===parseInt(this.serviceId)){if(""===this.babyNumListId||null===this.babyNumListId)return void this.$message.error("请选择宝宝数量");if(""===this.serviceModeListId||null===this.serviceModeListId)return void this.$message.error("请选择服务方式")}""!==this.serviceSalaryListId&&null!==this.serviceSalaryListId?""!==this.expListId&&null!==this.expListId?""!==this.ageListId&&null!==this.ageListId?""!==this.address&&null!==this.address?0!==this.natureListSelect.length?0!==this.skillListSelect.length?0!==this.nativeListSelect.length?function(e){var t=this,s={},r=e.$route.params.id;s.id=r,s.publisher_name=e.name,s.publisher_phone=e.phone,s.type_id=e.serviceId,s.service_date=1===parseInt(e.serviceId)?e.serviceDaysListId:"12",s.remark=e.remark,s.address_id="0",s.address=e.address,s.native_place_code=e.nativeListSelect.join(","),s.skill_ids=e.skillListSelect.join(","),s.nature_ids=e.natureListSelect.join(","),s.housework_company_id=Object(i.e)("company_id"),""!==e.babyAgeListId&&(s.baby_age=e.babyAgeListId),""!==e.serviceModeListId&&(s.live_home=e.serviceModeListId),""!==e.dueTime&&(s.due_time=e.getDate(e.dueTime)),""!==e.babyraisingBabyNumListId&&(s.baby_num=e.babyraisingBabyNumListId),""!==e.babyNumListId&&(s.baby_num=e.babyNumListId),""!==e.ageListId&&(s.service_age=e.ageListId),""!==e.serviceSalaryListId&&(s.salary_id=e.serviceSalaryListId),""!==e.expListId&&(s.experience_id=e.expListId),Object(a.a)(s).then(function(s){e.$confirm("需求还在下架状态，无法被推荐，请问是否恢复上架？","提示",{confirmButtonText:"保存修改并上架",cancelButtonText:"仅保存修改",type:"warning",showClose:!1,center:!0,closeOnClickModal:!1,closeOnPressEscape:!1}).then(function(){e.shelvesDemand(t)}).catch(function(){e.$router.push("/demandRecords")})})}(this):this.$message.error("请选择性格要求"):this.$message.error("请选择技能要求"):this.$message.error("请选择籍贯要求"):this.$message.error("请输入服务地址"):this.$message.error("请选择年龄要求"):this.$message.error("请选择经验要求"):this.$message.error("请选择服务薪资")},cancelAction:function(){this.$router.back(-1)}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"top_view"}},[s("el-row",[s("h3",[e._v("发布人基本信息")])]),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-col",{attrs:{span:10}},[s("span",[e._v("发布人：")])]),e._v(" "),s("span",[e._v(e._s(e.name))])],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("el-col",{attrs:{span:10}},[s("span",[e._v("发布手机号：")])]),e._v(" "),s("span",[e._v(e._s(e.phone))])],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("el-col",{attrs:{span:10}},[s("span",[e._v("服务类型：")])]),e._v(" "),s("span",[e._v(e._s(e.serviceName))])],1)],1)],1),e._v(" "),s("div",{attrs:{id:"middle_view"}},[s("p",[e._v("发布需求信息")]),e._v(" "),1===parseInt(this.serviceId)?s("el-row",[s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("预 产 期 ：")]),e._v(" "),s("el-date-picker",{attrs:{type:"date",placeholder:"请选择预产期"},model:{value:e.dueTime,callback:function(t){e.dueTime=t},expression:"dueTime"}})],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("服务期限：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择服务期限"},model:{value:e.serviceDaysListId,callback:function(t){e.serviceDaysListId=t},expression:"serviceDaysListId"}},e._l(e.serviceDaysList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("宝贝数量：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择宝贝数量"},model:{value:e.babyraisingBabyNumListId,callback:function(t){e.babyraisingBabyNumListId=t},expression:"babyraisingBabyNumListId"}},e._l(e.babyraisingBabyNumList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1)],1):e._e(),e._v(" "),2===parseInt(this.serviceId)?s("el-row",[s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("服务期限：")]),e._v(" "),s("label",{attrs:{for:""}},[e._v("12月")])]),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("服务方式：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择服务方式"},model:{value:e.serviceModeListId,callback:function(t){e.serviceModeListId=t},expression:"serviceModeListId"}},e._l(e.serviceModeList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1)],1):e._e(),e._v(" "),4===parseInt(this.serviceId)?s("el-row",[s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("服务期限：")]),e._v(" "),s("label",{attrs:{for:""}},[e._v("12月")])]),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("服务方式：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择服务方式"},model:{value:e.serviceModeListId,callback:function(t){e.serviceModeListId=t},expression:"serviceModeListId"}},e._l(e.serviceModeList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("服务对象：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择服务对象"},model:{value:e.hulistatusListId,callback:function(t){e.hulistatusListId=t},expression:"hulistatusListId"}},e._l(e.hulistatusList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1)],1):e._e(),e._v(" "),3===parseInt(this.serviceId)?s("el-row",[s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("服务期限：")]),e._v(" "),s("label",{attrs:{for:""}},[e._v("12月")])]),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("宝宝数量：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择宝宝数量"},model:{value:e.babyNumListId,callback:function(t){e.babyNumListId=t},expression:"babyNumListId"}},e._l(e.babyNumList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("宝宝年龄：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择宝宝年龄"},model:{value:e.babyAgeListId,callback:function(t){e.babyAgeListId=t},expression:"babyAgeListId"}},e._l(e.babyAgeList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("服务方式：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择服务方式"},model:{value:e.serviceModeListId,callback:function(t){e.serviceModeListId=t},expression:"serviceModeListId"}},e._l(e.serviceModeList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1)],1):e._e(),e._v(" "),s("el-row",{staticStyle:{"margin-top":"10px"}},[s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("服务薪资：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择服务薪资"},model:{value:e.serviceSalaryListId,callback:function(t){e.serviceSalaryListId=t},expression:"serviceSalaryListId"}},e._l(e.serviceSalaryList,function(e){return s("el-option",{key:e.id,attrs:{label:e.salary,value:e.id}})}),1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("经验要求：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择经验要求"},model:{value:e.expListId,callback:function(t){e.expListId=t},expression:"expListId"}},e._l(e.expList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1),e._v(" "),s("el-col",{attrs:{span:24}},[s("label",{attrs:{for:""}},[e._v("年龄要求：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择年龄要求"},model:{value:e.ageListId,callback:function(t){e.ageListId=t},expression:"ageListId"}},e._l(e.ageList,function(e){return s("el-option",{key:e.category,attrs:{label:e.name,value:e.category}})}),1)],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-top":"10px"}},[s("el-col",{attrs:{span:24}},[s("div",{staticStyle:{display:"flex"}},[s("label",{attrs:{for:""}},[e._v("服务地址：")]),e._v(" "),s("el-input",{staticStyle:{flex:"1"},attrs:{type:"textarea",rows:"8",resize:"none",maxlength:"500",placeholder:"请输入服务地址信息"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)])],1)],1),e._v(" "),s("div",{attrs:{id:"bottom_view"}},[s("div",{staticClass:"new"},[s("div",{staticClass:"form-group",attrs:{id:"name"}},[s("p",[e._v("籍贯要求：")]),e._v(" "),s("div",{staticClass:"bao"},[s("div",{staticClass:"native"},e._l(e.nativeList,function(t,i){return s("div",{key:i,class:-1===e.nativeListSelect.indexOf(t.code)?"":"active",attrs:{id:t.code},on:{click:function(s){return e.nativeAction(i,t)}}},[e._v(e._s(t.name))])}),0)])])]),e._v(" "),s("div",{staticClass:"new"},[e._m(0),e._v(" "),s("div",{staticClass:"bao"},[s("div",{staticClass:"native"},e._l(e.skillList,function(t,i){return s("div",{key:i,class:-1===e.skillListSelect.indexOf(t.id)?"":"active",attrs:{id:t.id},on:{click:function(s){return e.skillAction(i,t)}}},[e._v(e._s(t.name))])}),0)])]),e._v(" "),s("div",{staticClass:"new"},[e._m(1),e._v(" "),s("div",{staticClass:"bao"},[s("div",{staticClass:"native"},e._l(e.natureList,function(t,i){return s("div",{key:i,class:-1===e.natureListSelect.indexOf(t.id)?"":"active",attrs:{id:t.id},on:{click:function(s){return e.natureAction(i,t)}}},[e._v(e._s(t.name))])}),0)])]),e._v(" "),s("div",{staticStyle:{display:"flex"}},[s("label",{attrs:{for:""}},[e._v("备注信息：")]),e._v(" "),s("el-input",{staticStyle:{flex:"1"},attrs:{type:"textarea",rows:"8",resize:"none",maxlength:"500",placeholder:"备注信息"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),e._v(" "),s("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[s("el-button",{on:{click:e.cancelAction}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.editAction}},[e._v("保存")])],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",[this._v("技能要求：")]),this._v(" "),t("span",{staticStyle:{color:"#999","font-size":"14px"}},[this._v("请选择1-8个最重要的技能标签。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",[this._v("性格要求：")]),this._v(" "),t("span",{staticStyle:{color:"#999","font-size":"14px"}},[this._v("请选择1-6个最重要的性格标签。")])])}]};var c=s("VU/8")(l,n,!1,function(e){s("lF6w")},"data-v-4c283cee",null);t.default=c.exports},lF6w:function(e,t){}});
//# sourceMappingURL=28.9eeff31be2bbf8c1f8fd.js.map