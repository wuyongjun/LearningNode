webpackJsonp([30],{G9mS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("2fz3"),c=a("S6Tm"),l={data:function(){return{total:1,accountData:[],perPage:10,page:1,roleHash:{admin:"超级管理员",company_super:"公司超级管理员",company_normal:"公司普通管理员"},company_id:0}},created:function(){this.$store.dispatch("commitChangeTopTitles",["系统设置","管理员管理"]),this.company_id=Object(c.e)("company_id"),this.obtainAccountDataRequest()},filters:{formatDate:function(t){if("0"===t)return 0;var e=new Date(1e3*t),a=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var c=e.getDate();c=c<10?"0"+c:c;var l=e.getHours();l=l<10?"0"+l:l;var o=e.getMinutes();o=o<10?"0"+o:o;var r=e.getSeconds();return a+"-"+n+"-"+c+" "+l+":"+o+":"+(r=r<10?"0"+r:r)}},methods:{addAccount:function(){this.$router.push("/addAccount")},obtainAccountDataRequest:function(){var t=this,e="?page="+this.page+"&&per_page="+this.perPage+"&&company_id="+this.company_id;Object(n.e)(e).then(function(e){t.accountData=e.data.items,t.total=e.data.total})},pageChange:function(t){this.page=t,this.obtainAccountDataRequest()},deleteAccountClick:function(t){var e=this,a={id:t.id};Object(n.c)(a).then(function(t){e.$message({type:"success",message:"删除成功"}),e.pageChange(e.page)})},accountStatusClick:function(t){var e=this,a={id:t.id,user_status:!0===t.user_status?0:1};Object(n.a)(a).then(function(a){!0===t.user_status?e.$message({type:"success",message:"禁用成功"}):e.$message({type:"success",message:"启用成功"}),e.pageChange(e.page)})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-top":"24px"}},[a("label",{staticStyle:{color:"white",background:"#75ace6",display:"inline-block","margin-top":"12px",padding:"3px","margin-bottom":"12px",float:"left"}},[t._v("数据统计：共"+t._s(t.total)+"条")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.addAccount}},[t._v("新增管理员")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"12px"},attrs:{data:t.accountData,border:""}},[a("el-table-column",{attrs:{align:"center",label:"公司"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("label",{attrs:{align:"center"}},[t._v(t._s(null===e.row.company_object?"":e.row.company_object.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"user_name",align:"center",label:"登录账号"}}),t._v(" "),a("el-table-column",{attrs:{label:"角色",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("label",{attrs:{align:"center"}},[t._v(t._s(null===e.row.role_object?"":t.roleHash[e.row.role_object.role_name]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"city_info.name",label:"城市"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"上次登录时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("label",{attrs:{align:"center"}},[t._v(t._s(t._f("formatDate")(e.row.last_login_time)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("label",{attrs:{align:"center"}},[t._v(t._s(null===e.row.company_object?"":e.row.company_object.create_time))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"账号状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("label",{attrs:{align:"center"}},[t._v(t._s(!0===e.row.user_status?"启用中":"禁用中"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[!0===e.row.user_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.accountStatusClick(e.row)}}},[t._v("禁用")]):a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.accountStatusClick(e.row)}}},[t._v("启用")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteAccountClick(e.row)}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"pagination_credit"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.perPage,"current-page":t.page},on:{"current-change":t.pageChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,o,!1,function(t){a("ecrR")},"data-v-40f468bb",null);e.default=r.exports},ecrR:function(t,e){}});
//# sourceMappingURL=30.2b9ee71a325e79b13130.js.map