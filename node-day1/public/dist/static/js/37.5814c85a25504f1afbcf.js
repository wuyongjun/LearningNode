webpackJsonp([37],{KGg7:function(t,e){},nHR8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("5gKc"),s=a("S6Tm"),n=a("2fz3"),o={data:function(){return{detailInfo:{title:"管家帮",admin_name:"aa",remark:"aa",logo:"",business_license_img:"",addr_info:"aa",business_city:"aa",admin_phone:"aa",cd_info:{},city_info:{},province_info:{},cd_code:"",city_code:"",province_code:""},id:0,status:!1,provinceData:[],cityData:[],areaData:[]}},components:{"upload-image":i.a},created:function(){this.$store.dispatch("commitChangeTopTitles",["系统设置","基本信息"]),this.id=Object(s.e)("company_id"),this.obtainProvinceAddressData(),this.obtailEssentialInfoData()},methods:{uploadSuccess:function(t){this.detailInfo.logo=t.path},uploadLicenseSuccess:function(t){this.detailInfo.business_license_img=t.path},editClick:function(){this.status=!0},cancelClick:function(){this.status=!1},obtailEssentialInfoData:function(){var t=this;Object(n.d)(this.id).then(function(e){t.detailInfo=e.data,t.detailInfo.province_info&&(t.detailInfo.city_info?t.detailInfo.cd_code?t.detailInfo.business_city=t.detailInfo.province_info.name+t.detailInfo.city_info.name+t.detailInfo.cd_info.name:t.detailInfo.business_city=t.detailInfo.province_info.name+t.detailInfo.city_info.name:t.detailInfo.business_city=t.detailInfo.province_info.name),t.detailInfo.province_code&&t.provinceData.forEach(function(e){e.code===t.detailInfo.province_code&&t.obtainCityAddressDataSecond(e.id,t.detailInfo.city_code)})})},obtainProvinceAddressData:function(){var t=this;Object(n.h)("?pid=-1").then(function(e){t.provinceData=e.data})},obtainCityAddressData:function(t){var e=this;Object(n.h)("?pid="+t).then(function(t){e.cityData=t.data})},obtainCityAddressDataSecond:function(t,e){var a=this;Object(n.h)("?pid="+t).then(function(t){a.cityData=t.data,e&&a.cityData.forEach(function(t){t.code===e&&a.obtainAreaAddressData(t.id)})})},obtainAreaAddressData:function(t){var e=this;Object(n.h)("?pid="+t).then(function(t){e.areaData=t.data})},changeProvince:function(t){var e=this;this.provinceData.forEach(function(a){a.code===t&&(e.obtainCityAddressData(a.id),e.detailInfo.city_code="",e.detailInfo.cd_code="")})},changeCity:function(t){var e=this;this.cityData.forEach(function(a){a.code===t&&(e.obtainAreaAddressData(a.id),e.detailInfo.cd_code="")})},updateEssentialInfoData:function(){var t=this;if(this.detailInfo.admin_name)if(this.detailInfo.admin_phone)if(this.detailInfo.province_code)if(this.detailInfo.city_code)if(this.detailInfo.cd_code)if(this.detailInfo.addr_info)if(this.detailInfo.business_license_img)if(this.detailInfo.logo)if(this.detailInfo.remark){var e={id:this.id,title:this.detailInfo.title,admin_phone:this.detailInfo.admin_phone,admin_name:this.detailInfo.admin_name,province_code:this.detailInfo.province_code,city_code:this.detailInfo.city_code,cd_code:this.detailInfo.cd_code,addr_info:this.detailInfo.addr_info,remark:this.detailInfo.remark,business_license_img:this.detailInfo.business_license_img,logo:this.detailInfo.logo};Object(n.k)(e).then(function(e){t.status=!1,t.$message({type:"success",message:"修改成功"}),t.obtainProvinceAddressData(),t.obtailEssentialInfoData()})}else this.$message({type:"error",message:"请输入公司介绍"});else this.$message({type:"error",message:"请选择公司logo"});else this.$message({type:"error",message:"请选择公司营业照"});else this.$message({type:"error",message:"请输入公司具体地址"});else this.$message({type:"error",message:"请选择公司所在区"});else this.$message({type:"error",message:"请选择公司所在城市"});else this.$message({type:"error",message:"请选择公司所在省份"});else this.$message({type:"error",message:"请输入公司负责人手机号"});else this.$message({type:"error",message:"请输入公司负责人姓名"})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"24px"}},[a("div",{staticClass:"item-wrap"},[a("label",{staticClass:"title_wrap"},[t._v("公司名称")]),t._v(" "),a("div",{staticClass:"content-wrap"},[t.status?a("el-input",{staticClass:"business_name_edit",model:{value:t.detailInfo.title,callback:function(e){t.$set(t.detailInfo,"title",e)},expression:"detailInfo.title"}}):t._e(),t._v(" "),t.detailInfo.title&&!t.status?a("span",{staticClass:"business_name"},[t._v(t._s(t.detailInfo.title))]):t._e()],1)]),t._v(" "),a("div",{staticClass:"item-wrap"},[a("label",{staticClass:"title_wrap"},[t._v("公司负责人姓名")]),t._v(" "),a("div",{staticClass:"content-wrap"},[t.status?a("el-input",{staticClass:"business_name_edit",model:{value:t.detailInfo.admin_name,callback:function(e){t.$set(t.detailInfo,"admin_name",e)},expression:"detailInfo.admin_name"}}):t._e(),t._v(" "),t.detailInfo.admin_name&&!t.status?a("span",{staticClass:"business_name"},[t._v(t._s(t.detailInfo.admin_name))]):t._e()],1)]),t._v(" "),a("div",{staticClass:"item-wrap"},[a("label",{staticClass:"title_wrap"},[t._v("公司负责人电话")]),t._v(" "),a("div",{staticClass:"content-wrap"},[t.status?a("el-input",{staticClass:"business_name_edit",model:{value:t.detailInfo.admin_phone,callback:function(e){t.$set(t.detailInfo,"admin_phone",e)},expression:"detailInfo.admin_phone"}}):t._e(),t._v(" "),t.detailInfo.admin_phone&&!t.status?a("span",{staticClass:"business_name"},[t._v(t._s(t.detailInfo.admin_phone))]):t._e()],1)]),t._v(" "),a("div",{staticClass:"item-wrap"},[a("label",{staticClass:"title_wrap"},[t._v("公司所在城市")]),t._v(" "),a("div",{staticClass:"content-wrap"},[t.status?a("div",{staticClass:"business_name_edit"},[a("el-select",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请选择省"},on:{change:t.changeProvince},model:{value:t.detailInfo.province_code,callback:function(e){t.$set(t.detailInfo,"province_code",e)},expression:"detailInfo.province_code"}},t._l(t.provinceData,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}),1),t._v(" "),a("el-select",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请选择市"},on:{change:t.changeCity},model:{value:t.detailInfo.city_code,callback:function(e){t.$set(t.detailInfo,"city_code",e)},expression:"detailInfo.city_code"}},t._l(t.cityData,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}),1),t._v(" "),a("el-select",{attrs:{placeholder:"请选择区"},model:{value:t.detailInfo.cd_code,callback:function(e){t.$set(t.detailInfo,"cd_code",e)},expression:"detailInfo.cd_code"}},t._l(t.areaData,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}),1)],1):t._e(),t._v(" "),t.detailInfo.business_city&&!t.status?a("span",{staticClass:"business_name"},[t._v(t._s(t.detailInfo.business_city))]):t._e()])]),t._v(" "),a("div",{staticClass:"item-wrap"},[a("label",{staticClass:"title_wrap"},[t._v("公司具体地址")]),t._v(" "),a("div",{staticClass:"content-wrap"},[t.status?a("el-input",{staticClass:"business_name_edit",model:{value:t.detailInfo.addr_info,callback:function(e){t.$set(t.detailInfo,"addr_info",e)},expression:"detailInfo.addr_info"}}):t._e(),t._v(" "),t.detailInfo.addr_info&&!t.status?a("span",{staticClass:"business_name"},[t._v(t._s(t.detailInfo.addr_info))]):t._e()],1)]),t._v(" "),a("div",{staticClass:"item-wrap"},[a("label",{staticClass:"title_wrap",staticStyle:{"vertical-align":"top"}},[t._v("公司营业执照")]),t._v(" "),a("div",{staticClass:"content-wrap"},[a("upload-image",{attrs:{use:"logo","image-size":"50"},on:{uploadSucc:t.uploadLicenseSuccess}},[t.detailInfo.business_license_img?a("img",{staticClass:"avatar needsclick",attrs:{src:t.detailInfo.business_license_img}}):a("div",[a("i",{staticClass:"el-icon-plus avatar-uploader-icon needsclick"})])])],1)]),t._v(" "),a("div",{staticClass:"item-wrap"},[a("label",{staticClass:"title_wrap"},[t._v("公司logo")]),t._v(" "),a("div",{staticClass:"content-wrap"},[a("upload-image",{attrs:{use:"logo","image-size":"50"},on:{uploadSucc:t.uploadSuccess}},[t.detailInfo.logo?a("img",{staticClass:"avatar needsclick",attrs:{src:t.detailInfo.logo}}):a("div",[a("i",{staticClass:"el-icon-plus avatar-uploader-icon needsclick"})])])],1)]),t._v(" "),a("div",{staticClass:"item-wrap"},[a("label",{staticClass:"title_wrap"},[t._v("公司介绍")]),t._v(" "),a("div",{staticClass:"content-wrap"},[t.status?a("el-input",{staticClass:"remark_edit",attrs:{type:"textarea"},model:{value:t.detailInfo.remark,callback:function(e){t.$set(t.detailInfo,"remark",e)},expression:"detailInfo.remark"}}):t._e(),t._v(" "),t.detailInfo.remark&&!t.status?a("span",{staticClass:"business_name"},[t._v(t._s(t.detailInfo.remark))]):t._e()],1)]),t._v(" "),a("div",{staticStyle:{"margin-top":"24px",display:"block",float:"left",width:"100%","text-align":"center","margin-bottom":"36px"}},[t.status?a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.updateEssentialInfoData}},[t._v("确认")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.cancelClick}},[t._v("取消")])],1):a("el-button",{attrs:{type:"primary"},on:{click:t.editClick}},[t._v("编辑")])],1)])},staticRenderFns:[]};var c=a("VU/8")(o,l,!1,function(t){a("KGg7")},"data-v-1e3c45c3",null);e.default=c.exports}});
//# sourceMappingURL=37.5814c85a25504f1afbcf.js.map