webpackJsonp([33],{"1NTs":function(t,e){},ANLJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("//Fk"),s=a.n(l),i=a("9P38"),n={data:function(){return{searchName:"",searchPhone:"",optionsType:[],optionsStatus:[],statusValue:"",optionsAffiliatedUnit:[],typeValue:"",affiliatedUnitValue:"",tableData:[],page:1,per_page:10,total:0}},created:function(){var t=this;this.$store.dispatch("commitChangeTopTitles",["阿姨管理","阿姨信息"]),this.getTypeOption(),this.getStatusOption().then(function(){t._getAuntList()})},methods:{getStatusOption:function(){var t=this;return new s.a(function(e,a){Object(i.m)().then(function(a){var l=[],s=a.data;for(var i in s){var n={};n.label=s[i],n.value=i,l.push(n)}t.optionsStatus=l,e(a)})})},changeType:function(t){var e=this;this.optionsType.forEach(function(a){a.id===t&&(e.typeValue=a.id)})},updateStatus:function(t,e){var a=this,l={shelve_status:parseFloat(e),service_id:t.id};Object(i.r)(l).then(function(t){"success"===t.status&&(a.$message({type:"success",message:(0===l.shelve_status?"上":"下")+"架成功"}),a._getAuntList())})},getTypeOption:function(){var t=this;Object(i.n)().then(function(e){var a=e.data.items;a.forEach(function(t){t.value=t.id,t.label=t.title});var l=a;t.optionsType=l})},appBlacklist:function(t){var e=this;t.service_id=t.id,t.blacklist_status=1,Object(i.q)({}).then(function(t){e._getAuntList()})},pageChange:function(t){this.page=t,this._getAuntList()},_getAuntList:function(){var t=this,e="per_page="+this.per_page+"&page="+this.page+"&self=0&service_type_id="+this.typeValue+"&blackstatus=0&service_status="+this.statusValue+"&title="+this.searchName+"&phone="+this.searchPhone+"&&company_id="+JSON.parse(sessionStorage.userInfo).company_id;Object(i.d)(e).then(function(e){var a=e.data.items;a.forEach(function(e){var a=t.optionsStatus.find(function(t){if(t.value===e.service_status)return t.label});a&&(e.service_status=a.label),e.service_type&&(e.type=e.service_type.title)}),t.tableData=a,t.$forceUpdate(),t.total=e.data.total})},search:function(){this._getAuntList()},clear:function(){this.searchName="",this.searchPhone="",this.statusValue="",this.affiliatedUnitValue="",this.typeValue="",this._getAuntList()},getDetail:function(t){this.$router.push("/AuntDetail/"+t.id)},addAunt:function(){this.$router.push("/createAunt/-1")}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"aunt_list"}},[a("el-row",[a("el-col",[a("el-card",{staticClass:"card-box pt-0",attrs:{shadow:"hover"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"阿姨姓名"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入阿姨姓名"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入手机号码"},model:{value:t.searchPhone,callback:function(e){t.searchPhone=e},expression:"searchPhone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"服务类型"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"全部"},on:{change:t.changeType},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.optionsType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"上户状态"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"全部"},model:{value:t.statusValue,callback:function(e){t.statusValue=e},expression:"statusValue"}},t._l(t.optionsStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.clear}},[t._v("清除查询")])],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",[a("el-card",{staticClass:"card-box",attrs:{shadow:"hover"}},[a("div",{ref:"table",staticClass:"table-wrap"},[a("div",{staticClass:"over-table"},[a("span",{staticClass:"count",staticStyle:{float:"left"}},[t._v("数据统计：共"+t._s(t.total)+"个")]),t._v(" "),a("div",{staticClass:"btn-group",staticStyle:{width:"100px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addAunt}},[t._v("添加阿姨")])],1)]),t._v(" "),a("el-scrollbar",[a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:t.tableData,stripe:"",border:"",fit:"","header-row-class-name":"table-head"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{staticStyle:{width:"50px",height:"100px"},attrs:{prop:"title",label:"阿姨姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号码"}}),t._v(" "),a("el-table-column",{attrs:{label:"阿姨头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",[a("img",{staticStyle:{width:"100%",height:"90px","object-fit":"cover"},attrs:{src:t.row.photo}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"录入时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("p",[t._v(t._s(e.row.create_time))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"服务类型",prop:"type"}}),t._v(" "),a("el-table-column",{attrs:{label:"服务薪资",prop:"salary"}}),t._v(" "),a("el-table-column",{attrs:{label:"服务订单数",prop:"num"}}),t._v(" "),a("el-table-column",{attrs:{label:"服务状态",prop:"service_status"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.getDetail(e.row)}}},[t._v("查看")]),t._v(" "),1===e.row.off_shelve?a("el-button",{staticStyle:{"margin-left":"0px"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.updateStatus(e.row,"0")}}},[t._v("上架")]):t._e(),t._v(" "),0===e.row.off_shelve?a("el-button",{staticStyle:{"margin-left":"0px"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.updateStatus(e.row,"1")}}},[t._v("下架")]):t._e()]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"prev-text":"上一页","next-text":"下一页"},on:{"current-change":t.pageChange}})],1)])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(t){a("1NTs")},"data-v-336ba02b",null);e.default=o.exports}});
//# sourceMappingURL=33.c048f8a3bf4fc396cfc0.js.map